<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>How to Decorate Components with the JLayer Class (The Java&trade; Tutorials &gt;        
            Creating a GUI With JFC/Swing &gt; Using Other Swing Features)
</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="description" content="This Swing Java Tutorial describes developing graphical user interfaces (GUIs) for applications and applets using Swing components" />
     <meta name="keywords" content="java programming, learn java, java sample code, java swing, java ui, java user interface, swing components, swing events, swing layout  " />
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        A browser with JavaScript enabled is required for this page to operate properly.
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName" >Documentation</div>
            </div> 
            <br class="clearfloat" />
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">The Java&trade; Tutorials</div>
                        <div id="TopBar_right"> 
                            <!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            -->

<script type="text/javascript">function search() { var sform = document.getElementById("searchForm"); var srchelem = document.getElementById("searchField"); var srchelemreal = document.getElementById("keywordreal"); var srchval = srchelem.value; if (srchval.length == 0) { return false; } srchelemreal.value = srchval; sform.action = "http://docs.oracle.com/apps/search/search.jsp"; sform.method = "get"; sform.target = "_blank"; sform.submit(); }</script><form id="searchForm" onsubmit="return search()"><input type="hidden" name="category" value="java"/><input type="hidden" name="product" value="e25407-01"/><input type="hidden" name="q" value="" id="keywordreal"/><label for="searchField"><input type="text" id="searchField" size="30" onclick="this.value='';" /></label><input type="submit" value="Search" /></form>
              
                            <a href="javascript:toggleLeft()" id="ToggleLeft">Hide TOC</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">Using Other Swing Features</a></div>
<div class="linkAHEAD"><a href="desktop.html">How to Integrate with the Desktop Class</a></div>
<div class="linkAHEAD"><a href="trans_shaped_windows.html">How to Create Translucent and Shaped Windows</a></div>
<div class="nolinkAHEAD">How to Decorate Components with the JLayer Class</div>
<div class="linkAHEAD"><a href="action.html">How to Use Actions</a></div>
<div class="linkAHEAD"><a href="timer.html">How to Use Swing Timers</a></div>
<div class="linkAHEAD"><a href="access.html">How to Support Assistive Technologies</a></div>
<div class="linkAHEAD"><a href="focus.html">How to Use the Focus Subsystem</a></div>
<div class="linkAHEAD"><a href="keybinding.html">How to Use Key Bindings</a></div>
<div class="linkAHEAD"><a href="modality.html">How to Use Modality in Dialogs</a></div>
<div class="linkAHEAD"><a href="printtable.html">How to Print Tables</a></div>
<div class="linkAHEAD"><a href="printtext.html">How to Print Text</a></div>
<div class="linkAHEAD"><a href="splashscreen.html">How to Create a Splash Screen</a></div>
<div class="linkAHEAD"><a href="systemtray.html">How to Use the System Tray</a></div>
<div class="linkAHEAD"><a href="problems.html">Solving Common Problems Using Other Swing Features</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail:</b> Creating a GUI With JFC/Swing
        <br /><b>Lesson:</b> Using Other Swing Features
    </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Home Page</a>
                &gt;
                <a href="../index.html" target="_top">Creating a GUI With JFC/Swing</a>
                &gt;
                <a href="index.html" target="_top">Using Other Swing Features</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="trans_shaped_windows.html">&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target="_top" href="../TOC.html">Trail</a>&nbsp;&bull;&nbsp;<a target="_top" href="action.html">Next&nbsp;&raquo;</a>
            </div>
            <div class="Banner"><p style="background-color: rgb(247, 248, 249); border-width: 1px; padding: 10px; font-style: italic; border-style: solid; border-color: rgb(64, 74, 91);">The Java Tutorials have been written for JDK 8. Examples and practices described in this page don't take advantage of improvements introduced in later releases and might use technology no longer available.<br/>See <a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/java/javase&id=java_language_changes">Java Language Changes</a> for a summary of updated language features in Java SE 9 and subsequent releases.<br/>See <a href="https://www.oracle.com/technetwork/java/javase/jdk-relnotes-index-2162236.html">JDK Release Notes</a> for information about new features, enhancements, and removed or deprecated options for all JDK releases.</p></div>
            <div id="PageTitle"><h1>How to Decorate Components with the JLayer Class</h1></div>
            <div id="PageContent">

<!-- How to Decorate Components with the JLayer Class -->
<p>The <code>JLayer</code> class is a flexible and powerful <i>decorator</i> for Swing components. It enables you to draw on components and respond to component events without modifying the underlying component directly.</p>
<p>This document describes examples that show the power of the <code>JLayer</code> class. Full source code is available.</p>
<ul>
<li><a href="#using">Using the <code>JLayer</code> Class</a></li>
<li><a href="#layerui">Using the <code>LayerUI</code> Class</a></li>
<li><a href="#drawing">Drawing on Components</a></li>
<li><a href="#events">Responding to Events</a></li>
<li><a href="#animating">Animating a Busy Indicator</a></li>
<li><a href="#validation">Validating Text Fields</a></li>
</ul>
<p>For a brief introduction to the material on this page, watch the following video.</p>
<p><iframe width="560" height="349" title="Using JLayer in Swing Applications" src="http://www.youtube.com/embed/6mQYsWCkx4g" frameborder="1" longdesc="a video on youtube that demonstrates the capabilities of the jlayer component"></iframe></p>
<p>A JavaScript-enabled web browser and an Internet connection are required for the video. If you cannot see the video, try <a href="http://www.youtube.com/watch?v=6mQYsWCkx4g">viewing it at YouTube</a>.</p>
<h2><a name="using" id="using">Using the <code>JLayer</code> Class</a></h2>
<p>The <code>javax.swing.JLayer</code> class is half of a team. The other half is the <code>javax.swing.plaf.LayerUI</code> class. Suppose you want to do some custom drawing atop a <code>JButton</code> object (<i>decorate</i> the <code>JButton</code> object). The component you want to decorate is the <i>target</i>.</p>
<ul>
<li>Create the target component.</li>
<li>Create an instance of a <code>LayerUI</code> subclass to do the drawing.</li>
<li>Create a <code>JLayer</code> object that wraps the target and the <code>LayerUI</code> object.</li>
<li>Use the <code>JLayer</code> object in your user interface just as you would use the target component.</li>
</ul>
<p>For example, to add an instance of a <code>JPanel</code> subclass to a <code>JFrame</code> object, you would do something similar to this:</p>
<div class="codeblock"><pre>
JFrame f = new JFrame();

JPanel panel = createPanel();

f.add (panel);
</pre></div>
<p>To decorate the <code>JPanel</code> object, do something similar to this instead:</p>
<div class="codeblock"><pre>
JFrame f = new JFrame();

JPanel panel = createPanel();
LayerUI&lt;JPanel&gt; layerUI = new MyLayerUISubclass();
JLayer&lt;JPanel&gt; jlayer = new JLayer&lt;JPanel&gt;(panel, layerUI);

f.add (jlayer);
</pre></div>
<p>Use generics to ensure that the <code>JPanel</code> object and the <code>LayerUI</code> object are for compatible types. In the previous example, both the <code>JLayer</code> object and the <code>LayerUI</code> object are used with the <code>JPanel</code> class.</p>
<p>The <code>JLayer</code> class is usually generified with the exact type of its view component, while the <code>LayerUI</code> class is designed to be used with <code>JLayer</code> classes of its generic parameter or any of its ancestors.</p>
<p>For example, a <code>LayerUI&lt;JComponent&gt;</code> object can be used with a <code>JLayer&lt;AbstractButton&gt;</code> object.</p>
<p>A <code>LayerUI</code> object is responsible for custom decoration and event handling for a <code>JLayer</code> object. When you create an instance of a <code>LayerUI</code> subclass, your custom behavior can be applicable to every <code>JLayer</code> object with an appropriate generic type. That is why the <code>JLayer</code> class is <code>final</code>; all custom behavior is encapsulated in your <code>LayerUI</code> subclass, so there is no need to make a <code>JLayer</code> subclass.</p>
<h2><a name="layerui" id="layerui">Using the <code>LayerUI</code> Class</a></h2>
<p>The <code>LayerUI</code> class inherits most of its behavior from the <code>ComponentUI</code> class. Here are the most commonly overridden methods:</p>
<ul>
<li>The <code>paint(Graphics g, JComponent c)</code> method is called when the target component needs to be drawn. To render the component in the same way that Swing renders it, call the <code>super.paint(g, c)</code> method.</li>
<li>The <code>installUI(JComponent c)</code> method is called when an instance of your <code>LayerUI</code> subclass is associated with a component. Perform any necessary initializations here. The component that is passed in is the corresponding <code>JLayer</code> object. Retrieve the target component with the <code>JLayer</code> class&#39; <code>getView()</code> method.</li>
<li>The <code>uninstallUI(JComponent c)</code> method is called when an instance of your <code>LayerUI</code> subclass is no longer associated with the given component. Clean up here if necessary.</li>
</ul>
<h2><a name="drawing" id="drawing">Drawing on Components</a></h2>
<p>To use the <code>JLayer</code> class, you need a good <code>LayerUI</code> subclass. The simplest kinds of <code>LayerUI</code> classes change how components are drawn. Here is one, for example, that paints a transparent color gradient on a component.</p>
<div class="codeblock"><pre>
class WallpaperLayerUI extends LayerUI&lt;JComponent&gt; {
  @Override
  public void paint(Graphics g, JComponent c) {
    super.paint(g, c);

    Graphics2D g2 = (Graphics2D) g.create();

    int w = c.getWidth();
    int h = c.getHeight();
    g2.setComposite(AlphaComposite.getInstance(
            AlphaComposite.SRC_OVER, .5f));
    g2.setPaint(new GradientPaint(0, 0, Color.yellow, 0, h, Color.red));
    g2.fillRect(0, 0, w, h);

    g2.dispose();
  }
}
</pre></div>
<p>The <code>paint()</code> method is where the custom drawing takes place. The call to the <code>super.paint()</code> method draws the contents of the <code>JPanel</code> object. After setting up a 50% transparent composite, the color gradient is drawn.</p>
<p>After the <code>LayerUI</code> subclass is defined, using it is simple. Here is some source code that uses the <code>WallpaperLayerUI</code> class:</p>
<div class="codeblock"><pre>
import java.awt.*;
import javax.swing.*;
import javax.swing.plaf.LayerUI;

public class Wallpaper {
  public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        createUI();
      }
    });
  }

  public static void createUI() {
    JFrame f = new JFrame("Wallpaper");
    
    JPanel panel = createPanel();
    LayerUI&lt;JComponent&gt; layerUI = new WallpaperLayerUI();
    JLayer&lt;JComponent&gt; jlayer = new JLayer&lt;JComponent&gt;(panel, layerUI);
    
    f.add (jlayer);
    
    f.setSize(300, 200);
    f.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    f.setLocationRelativeTo (null);
    f.setVisible (true);
  }

  private static JPanel createPanel() {
    JPanel p = new JPanel();

    ButtonGroup entreeGroup = new ButtonGroup();
    JRadioButton radioButton;
    p.add(radioButton = new JRadioButton("Beef", true));
    entreeGroup.add(radioButton);
    p.add(radioButton = new JRadioButton("Chicken"));
    entreeGroup.add(radioButton);
    p.add(radioButton = new JRadioButton("Vegetable"));
    entreeGroup.add(radioButton);

    p.add(new JCheckBox("Ketchup"));
    p.add(new JCheckBox("Mustard"));
    p.add(new JCheckBox("Pickles"));

    p.add(new JLabel("Special requests:"));
    p.add(new JTextField(20));

    JButton orderButton = new JButton("Place Order");
    p.add(orderButton);

    return p;
  }
}
</pre></div>
<p>Here is the result:</p>
<center><img src="../../figures/uiswing/misc/Wallpaper.png" width="300" height="200" align="bottom" alt="A panel with a jazzy decoration" /></center><p>Source code:</p>
<dl>
<dd>
<a class="SourceLink" target="_blank" href="../examples/zipfiles/misc-WallpaperProject.zip" onclick="showCode('../../displayCode.html', '../examples/zipfiles/misc-WallpaperProject.zip'); return false;"><code>Wallpaper NetBeans Project</code></a></dd>
<dd>
<a class="SourceLink" target="_blank" href="../examples/misc/WallpaperProject/src/Wallpaper.java" onclick="showCode('../../displayCode.html', '../examples/misc/WallpaperProject/src/Wallpaper.java'); return false;"><code>Wallpaper.java</code></a></dd>
</dl>
<p>Run with 
<a class="OutsideLink" target="_blank" href="http://www.oracle.com/technetwork/java/javase/javawebstart/index.html">Java Web Start</a>:</p>
<a href="https://docs.oracle.com/javase/tutorialJWS/samples/uiswing/WallpaperProject/Wallpaper.jnlp"><img src="../../images/jws-launch-button.png" alt="Launches the example" /></a><br />
<p>The <code>LayerUI</code> class&#39; <code>paint()</code> method gives you complete control over how a component is drawn. Here is another <code>LayerUI</code> subclass that shows how the entire contents of a panel can be modified using Java 2D image processing:</p>
<div class="codeblock"><pre>
class BlurLayerUI extends LayerUI&lt;JComponent&gt; {
  private BufferedImage mOffscreenImage;
  private BufferedImageOp mOperation;

  public BlurLayerUI() {
    float ninth = 1.0f / 9.0f;
    float[] blurKernel = {
      ninth, ninth, ninth,
      ninth, ninth, ninth,
      ninth, ninth, ninth
    };
    mOperation = new ConvolveOp(
            new Kernel(3, 3, blurKernel),
            ConvolveOp.EDGE_NO_OP, null);
  }

  @Override
  public void paint (Graphics g, JComponent c) {
    int w = c.getWidth();
    int h = c.getHeight();

    if (w == 0 || h == 0) {
      return;
    }

    // Only create the offscreen image if the one we have
    // is the wrong size.
    if (mOffscreenImage == null ||
            mOffscreenImage.getWidth() != w ||
            mOffscreenImage.getHeight() != h) {
      mOffscreenImage = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
    }

    Graphics2D ig2 = mOffscreenImage.createGraphics();
    ig2.setClip(g.getClip());
    super.paint(ig2, c);
    ig2.dispose();

    Graphics2D g2 = (Graphics2D)g;
    g2.drawImage(mOffscreenImage, mOperation, 0, 0);
  }
}
</pre></div>
<p>In the <code>paint()</code> method, the panel is rendered into an offscreen image. The offscreen image is processed with a convolution operator, then drawn to the screen.</p>
<p>The entire user interface is still live, just blurry:</p>
<center><img src="../../figures/uiswing/misc/Myopia.png" width="300" height="200" align="bottom" alt="A graphically inverted user interface" /></center><p>Source code:</p>
<dl>
<dd>
<a class="SourceLink" target="_blank" href="../examples/zipfiles/misc-MyopiaProject.zip" onclick="showCode('../../displayCode.html', '../examples/zipfiles/misc-MyopiaProject.zip'); return false;"><code>Myopia NetBeans Project</code></a></dd>
<dd>
<a class="SourceLink" target="_blank" href="../examples/misc/MyopiaProject/src/Myopia.java" onclick="showCode('../../displayCode.html', '../examples/misc/MyopiaProject/src/Myopia.java'); return false;"><code>Myopia.java</code></a></dd>
</dl>
<p>Run with 
<a class="OutsideLink" target="_blank" href="http://www.oracle.com/technetwork/java/javase/javawebstart/index.html">Java Web Start</a>:</p>
<a href="https://docs.oracle.com/javase/tutorialJWS/samples/uiswing/MyopiaProject/Myopia.jnlp"><img src="../../images/jws-launch-button.png" alt="Launches the example" /></a><br />
<h2><a name="events" id="events">Responding to Events</a></h2>
<p>Your <code>LayerUI</code> subclass can also receive all of the events of its corresponding component. However, the <code>JLayer</code> instance must register its interest in specific types of events. This happens with the <code>JLayer</code> class&#39; <code>setLayerEventMask()</code> method. Typically, however, this call is made from initialization performed in the <code>LayerUI</code> class&#39; <code>installUI()</code> method.</p>
<p>For example, the following excerpt shows a portion of a <code>LayerUI</code> subclass that registers to receive mouse and mouse motion events.</p>
<div class="codeblock"><pre>
public void installUI(JComponent c) {
  super.installUI(c);
  JLayer jlayer = (JLayer)c;
  jlayer.setLayerEventMask(
    AWTEvent.MOUSE_EVENT_MASK |
    AWTEvent.MOUSE_MOTION_EVENT_MASK
  );
}
</pre></div>
<p>All events going to your <code>JLayer</code> subclass get routed to an event handler method whose name matches the event type. For example, you can respond to mouse and mouse motion events by overriding corresponding methods:</p>
<div class="codeblock"><pre>
protected void processMouseEvent(MouseEvent e, JLayer l) {
  // ...
}

protected void processMouseMotionEvent(MouseEvent e, JLayer l) {
  // ...
}
</pre></div>
<p>The following is a <code>LayerUI</code> subclass that draws a translucent circle wherever the mouse moves inside a panel.</p>
<div class="codeblock"><pre>
class SpotlightLayerUI extends LayerUI&lt;JPanel&gt; {
  private boolean mActive;
  private int mX, mY;

  @Override
  public void installUI(JComponent c) {
    super.installUI(c);
    JLayer jlayer = (JLayer)c;
    jlayer.setLayerEventMask(
      AWTEvent.MOUSE_EVENT_MASK |
      AWTEvent.MOUSE_MOTION_EVENT_MASK
    );
  }

  @Override
  public void uninstallUI(JComponent c) {
    JLayer jlayer = (JLayer)c;
    jlayer.setLayerEventMask(0);
    super.uninstallUI(c);
  }

  @Override
  public void paint (Graphics g, JComponent c) {
    Graphics2D g2 = (Graphics2D)g.create();

    // Paint the view.
    super.paint (g2, c);

    if (mActive) {
      // Create a radial gradient, transparent in the middle.
      java.awt.geom.Point2D center = new java.awt.geom.Point2D.Float(mX, mY);
      float radius = 72;
      float[] dist = {0.0f, 1.0f};
      Color[] colors = {new Color(0.0f, 0.0f, 0.0f, 0.0f), Color.BLACK};
      RadialGradientPaint p =
          new RadialGradientPaint(center, radius, dist, colors);
      g2.setPaint(p);
      g2.setComposite(AlphaComposite.getInstance(
          AlphaComposite.SRC_OVER, .6f));
      g2.fillRect(0, 0, c.getWidth(), c.getHeight());
    }

    g2.dispose();
  }

  @Override
  protected void processMouseEvent(MouseEvent e, JLayer l) {
    if (e.getID() == MouseEvent.MOUSE_ENTERED) mActive = true;
    if (e.getID() == MouseEvent.MOUSE_EXITED) mActive = false;
    l.repaint();
  }

  @Override
  protected void processMouseMotionEvent(MouseEvent e, JLayer l) {
    Point p = SwingUtilities.convertPoint(e.getComponent(), e.getPoint(), l);
    mX = p.x;
    mY = p.y;
    l.repaint();
  }
}
</pre></div>
<p>The <code>mActive</code> variable indicates whether or not the mouse is inside the coordinates of the panel. In the <code>installUI()</code> method, the <code>setLayerEventMask()</code> method is called to indicate the <code>LayerUI</code> subclass&#39; interest in receiving mouse and mouse motion events.</p>
<p>In the <code>processMouseEvent()</code> method, the <code>mActive</code> flag is set depending on the position of the mouse. In the <code>processMouseMotionEvent()</code> method, the coordinates of the mouse movement are stored in the <code>mX</code> and <code>mY</code> member variables so that they can be used later in the <code>paint()</code> method.</p>
<p>The <code>paint()</code> method shows the default appearance of the panel, then overlays a radial gradient for a spotlight effect:</p>
<center><img src="../../figures/uiswing/misc/Diva.png" width="300" height="200" align="bottom" alt="A spotlight that follows the mouse" /></center><p>Source code:</p>
<dl>
<dd>
<a class="SourceLink" target="_blank" href="../examples/zipfiles/misc-DivaProject.zip" onclick="showCode('../../displayCode.html', '../examples/zipfiles/misc-DivaProject.zip'); return false;"><code>Diva NetBeans Project</code></a></dd>
<dd>
<a class="SourceLink" target="_blank" href="../examples/misc/DivaProject/src/Diva.java" onclick="showCode('../../displayCode.html', '../examples/misc/DivaProject/src/Diva.java'); return false;"><code>Diva.java</code></a></dd>
</dl>
<p>Run with 
<a class="OutsideLink" target="_blank" href="http://www.oracle.com/technetwork/java/javase/javawebstart/index.html">Java Web Start</a>:</p>
<a href="https://docs.oracle.com/javase/tutorialJWS/samples/uiswing/DivaProject/Diva.jnlp"><img src="../../images/jws-launch-button.png" alt="Launches the example" /></a><br />
<h2><a name="animating" id="animating">Animating a Busy Indicator</a></h2>
<p>This example is an animated busy indicator. It demonstrates animation in a <code>LayerUI</code> subclass and features a fade-in and fade-out. It is more complicated that the previous examples, but it is based on the same principle of defining a <code>paint()</code> method for custom drawing.</p>
<p>Click the <b>Place Order</b> button to see the busy indicator for 4 seconds. Notice how the panel is grayed out and the indicator spins. The elements of the indicator have varying levels of transparency.</p>
<p>The <code>LayerUI</code> subclass, the <code>WaitLayerUI</code> class, shows how to fire property change events to update the component. The <code>WaitLayerUI</code> class uses a <code>Timer</code> object to update its state 24 times a second. This happens in the timer&#39;s target method, the <code>actionPerformed()</code> method.</p>
<p>The <code>actionPerformed()</code> method uses the <code>firePropertyChange()</code> method to indicate that the internal state was updated. This triggers a call to the <code>applyPropertyChange()</code> method, which repaints the <code>JLayer</code> object:</p>
<center><img src="../../figures/uiswing/misc/TapTapTap.png" width="300  " height="200" align="bottom" alt="A smooth busy indicator" /></center><p>Source code:</p>
<dl>
<dd>
<a class="SourceLink" target="_blank" href="../examples/zipfiles/misc-TapTapTapProject.zip" onclick="showCode('../../displayCode.html', '../examples/zipfiles/misc-TapTapTapProject.zip'); return false;"><code>TapTapTap NetBeans Project</code></a></dd>
<dd>
<a class="SourceLink" target="_blank" href="../examples/misc/TapTapTapProject/src/TapTapTap.java" onclick="showCode('../../displayCode.html', '../examples/misc/TapTapTapProject/src/TapTapTap.java'); return false;"><code>TapTapTap.java</code></a></dd>
</dl>
<p>Run with 
<a class="OutsideLink" target="_blank" href="http://www.oracle.com/technetwork/java/javase/javawebstart/index.html">Java Web Start</a>:</p>
<a href="https://docs.oracle.com/javase/tutorialJWS/samples/uiswing/TapTapTapProject/TapTapTap.jnlp"><img src="../../images/jws-launch-button.png" alt="Launches the example" /></a><br />
<h2><a name="validation" id="validation">Validating Text Fields</a></h2>
<p>The final example in this document shows how the <code>JLayer</code> class can be used to decorate text fields to show if they contain valid data. While the other examples use the <code>JLayer</code> class to wrap panels or general components, this example shows how to wrap a <code>JFormattedTextField</code> component specifically. It also demonstrates that a single <code>LayerUI</code> subclass implementation can be used for multiple <code>JLayer</code> instances.</p>
<p>The <code>JLayer</code> class is used to provide a visual indication for fields that have invalid data. When the <code>ValidationLayerUI</code> class paints the text field, it draws a red X if the field contents cannot be parsed. Here is an example:</p>
<center><img src="../../figures/uiswing/misc/FieldValidator.png" width="277" height="122" align="bottom" alt="Immediate feedback for bad input" /></center><p>Source code:</p>
<dl>
<dd>
<a class="SourceLink" target="_blank" href="../examples/zipfiles/misc-FieldValidatorProject.zip" onclick="showCode('../../displayCode.html', '../examples/zipfiles/misc-FieldValidatorProject.zip'); return false;"><code>FieldValidator NetBeans Project</code></a></dd>
<dd>
<a class="SourceLink" target="_blank" href="../examples/misc/FieldValidatorProject/src/FieldValidator.java" onclick="showCode('../../displayCode.html', '../examples/misc/FieldValidatorProject/src/FieldValidator.java'); return false;"><code>FieldValidator.java</code></a></dd>
</dl>
<p>Run with 
<a class="OutsideLink" target="_blank" href="http://www.oracle.com/technetwork/java/javase/javawebstart/index.html">Java Web Start</a>:</p>
<a href="https://docs.oracle.com/javase/tutorialJWS/samples/uiswing/FieldValidatorProject/FieldValidator.jnlp"><img src="../../images/jws-launch-button.png" alt="Launches the example" /></a><br />


        </div>
        <div class="NavBit">
            <a target="_top" href="trans_shaped_windows.html">&laquo; Previous</a>
            &bull;
            <a target="_top" href="../TOC.html">Trail</a>
            &bull;
            <a target="_top" href="action.html">Next &raquo;</a>
        </div>
    </div>
    
<hr class="clearfloat"/>

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">About Oracle</a> | 
<a href="http://www.oracle.com/us/corporate/contact/index.html">Contact Us</a> |
<a href="http://www.oracle.com/us/legal/index.html">Legal Notices</a> | 
<a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a> |
<a href="http://www.oracle.com/us/legal/privacy/index.html">Your Privacy Rights</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">
Copyright &copy; 1995, 2020 Oracle and/or its affiliates. All rights reserved.</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>Previous page:</b> How to Create Translucent and Shaped Windows
        <br /><b>Next page:</b> How to Use Actions
    </div>
</body>
</html> 
