<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>The Map Interface (The Java&trade; Tutorials &gt;        
            Collections &gt; Interfaces)
</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="description" content="This collections Java tutorial describes interfaces, implementations, and algorithms in the Java Collections framework" />
     <meta name="keywords" content="java programming, learn java, java sample code, java collections, set, list, queue, map, array, arraylist" />
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        A browser with JavaScript enabled is required for this page to operate properly.
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName" >Documentation</div>
            </div> 
            <br class="clearfloat" />
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">The Java&trade; Tutorials</div>
                        <div id="TopBar_right"> 
                            <!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            -->

<script type="text/javascript">function search() { var sform = document.getElementById("searchForm"); var srchelem = document.getElementById("searchField"); var srchelemreal = document.getElementById("keywordreal"); var srchval = srchelem.value; if (srchval.length == 0) { return false; } srchelemreal.value = srchval; sform.action = "http://docs.oracle.com/apps/search/search.jsp"; sform.method = "get"; sform.target = "_blank"; sform.submit(); }</script><form id="searchForm" onsubmit="return search()"><input type="hidden" name="category" value="java"/><input type="hidden" name="product" value="e25407-01"/><input type="hidden" name="q" value="" id="keywordreal"/><label for="searchField"><input type="text" id="searchField" size="30" onclick="this.value='';" /></label><input type="submit" value="Search" /></form>
              
                            <a href="javascript:toggleLeft()" id="ToggleLeft">Hide TOC</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">Interfaces</a></div>
<div class="linkAHEAD"><a href="collection.html">The Collection Interface</a></div>
<div class="linkAHEAD"><a href="set.html">The Set Interface</a></div>
<div class="linkAHEAD"><a href="list.html">The List Interface</a></div>
<div class="linkAHEAD"><a href="queue.html">The Queue Interface</a></div>
<div class="linkAHEAD"><a href="deque.html">The Deque Interface</a></div>
<div class="nolinkAHEAD">The Map Interface</div>
<div class="linkAHEAD"><a href="order.html">Object Ordering</a></div>
<div class="linkAHEAD"><a href="sorted-set.html">The SortedSet Interface</a></div>
<div class="linkAHEAD"><a href="sorted-map.html">The SortedMap Interface</a></div>
<div class="linkAHEAD"><a href="summary.html">Summary of Interfaces</a></div>
<div class="linkQUESTIONS"><a href="QandE/questions.html">Questions and Exercises</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail:</b> Collections
        <br /><b>Lesson:</b> Interfaces
    </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Home Page</a>
                &gt;
                <a href="../index.html" target="_top">Collections</a>
                &gt;
                <a href="index.html" target="_top">Interfaces</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="deque.html">&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target="_top" href="../TOC.html">Trail</a>&nbsp;&bull;&nbsp;<a target="_top" href="order.html">Next&nbsp;&raquo;</a>
            </div>
            <div class="Banner"><p style="background-color: rgb(247, 248, 249); border-width: 1px; padding: 10px; font-style: italic; border-style: solid; border-color: rgb(64, 74, 91);">The Java Tutorials have been written for JDK 8. Examples and practices described in this page don't take advantage of improvements introduced in later releases and might use technology no longer available.<br/>See <a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/java/javase&id=java_language_changes">Java Language Changes</a> for a summary of updated language features in Java SE 9 and subsequent releases.<br/>See <a href="https://www.oracle.com/technetwork/java/javase/jdk-relnotes-index-2162236.html">JDK Release Notes</a> for information about new features, enhancements, and removed or deprecated options for all JDK releases.</p></div>
            <div id="PageTitle"><h1>The Map Interface</h1></div>
            <div id="PageContent">

<p>A 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html"><code>Map</code></a> is an object that maps keys to values. A map cannot contain duplicate keys: Each key can map to at most one value. It models the mathematical <i>function</i> abstraction. The <code>Map</code> interface includes methods for 
basic operations (such as <code>put</code>, <code>get</code>, <code>remove</code>, 
<code>containsKey</code>, <code>containsValue</code>, <code>size</code>, and <code>empty</code>),
bulk operations (such as <code>putAll</code> and <code>clear</code>), and
collection views (such as <code>keySet</code>, <code>entrySet</code>, and <code>values</code>).
</p>
<!--
<div class="codeblock"><pre>
public interface Map&lt;K,V&gt; {

    // Basic operations
    V put(K key, V value);
    V get(Object key);
    V remove(Object key);
    boolean containsKey(Object key);
    boolean containsValue(Object value);
    int size();
    boolean isEmpty();

    // Bulk operations
    void putAll(Map&lt;? extends K, ? extends V&gt; m);
    void clear();

    // Collection Views
    public Set&lt;K&gt; keySet();
    public Collection&lt;V&gt; values();
    public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet();

    // Interface for entrySet elements
    public interface Entry {
        K getKey();
        V getValue();
        V setValue(V value);
    }
}
</pre></div>
-->
<p>The Java platform contains three general-purpose <code>Map</code> implementations: 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html"><code>HashMap</code></a>, 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/util/TreeMap.html"><code>TreeMap</code></a>, and 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html"><code>LinkedHashMap</code></a>. Their behavior and performance are precisely analogous to <code>HashSet</code>, <code>TreeSet</code>, and <code>LinkedHashSet</code>, as described in 
<a class="TutorialLink" target="_top" href="set.html">The Set Interface</a> section. </p>

<p>
The remainder of this page discusses the <code>Map</code> interface in detail. 
But first, here are some more examples of collecting to <code>Map</code>s using JDK 8 aggregate operations. Modeling real-world objects is a common task in object-oriented programming, so it is reasonable to think that some programs might, for example, group employees by department:
</p>

<div class="codeblock"><pre>
// Group employees by department
Map&lt;Department, List&lt;Employee&gt;&gt; byDept = employees.stream()
.collect(Collectors.groupingBy(Employee::getDepartment));
</pre></div>

<p>
Or compute the sum of all salaries by department:
</p>


<div class="codeblock"><pre>
// Compute sum of salaries by department
Map&lt;Department, Integer&gt; totalByDept = employees.stream()
.collect(Collectors.groupingBy(Employee::getDepartment,
Collectors.summingInt(Employee::getSalary)));
</pre></div>

<p>
Or perhaps group students by passing or failing grades:
</p>


<div class="codeblock"><pre>
// Partition students into passing and failing
Map&lt;Boolean, List&lt;Student&gt;&gt; passingFailing = students.stream()
.collect(Collectors.partitioningBy(s -&gt; s.getGrade()&gt;= PASS_THRESHOLD)); 
</pre></div>

<p>
You could also group people by city:
</p>

<div class="codeblock"><pre>
// Classify Person objects by city
Map&lt;String, List&lt;Person&gt;&gt; peopleByCity
         = personStream.collect(Collectors.groupingBy(Person::getCity));
</pre></div>

<p>
Or even cascade two collectors to classify people by state and city:
</p>

<div class="codeblock"><pre>
// Cascade Collectors 
Map&lt;String, Map&lt;String, List&lt;Person&gt;&gt;&gt; peopleByStateAndCity
  = personStream.collect(Collectors.groupingBy(Person::getState,
  Collectors.groupingBy(Person::getCity)))
</pre></div>

<p>
Again, these are but a few examples of how to use the new JDK 8 APIs. For in-depth
coverage of lambda expressions and aggregate operations see the lesson entitled

<a class="TutorialLink" target="_top" href="../../collections/streams/index.html">Aggregate Operations</a>.
</p>




<!--
<h2>Comparison to Hashtable</h2>
<p>If you&#39;ve used <code>Hashtable</code>, you&#39;re already familiar with the general basics of <code>Map</code>. (Of course, <code>Map</code> is an interface, while <code>Hashtable</code> is a concrete implementation.) The following are the major differences:</p>
<ul>
<li><code>Map</code> provides <code>Collection</code> views instead of direct support for iteration via <code>Enumeration</code> objects. <code>Collection</code> views greatly enhance the expressiveness of the interface, as discussed later in this section.</li>
<li><code>Map</code> allows you to iterate over keys, values, or key-value pairs; <code>Hashtable</code> does not provide the third option.</li>
<li><code>Map</code> provides a safe way to remove entries in the midst of iteration; <code>Hashtable</code> did not.</li>
</ul>
<p>Finally, <code>Map</code> fixes a minor deficiency in the <code>Hashtable</code> interface. <code>Hashtable</code> has a method called <code>contains</code>, which returns <code>true</code> if the <code>Hashtable</code> contains a given <i>value</i>. Given its name, you&#39;d expect this method to return <code>true</code> if the <code>Hashtable</code> contained a given <i>key</i>, because the key is the primary access mechanism for a <code>Hashtable</code>. The <code>Map</code> interface eliminates this source of confusion by renaming the method <code>containsValue</code>. Also, this improves the interface&#39;s consistency &#151; <code>containsValue</code> parallels <code>containsKey</code>.</p>
-->

<h2>Map Interface Basic Operations</h2>
<p>The basic operations of <code>Map</code> (<code>put</code>, <code>get</code>, <code>containsKey</code>, <code>containsValue</code>, <code>size</code>, and <code>isEmpty</code>) behave exactly like their counterparts in <code>Hashtable</code>. The 
<a class="SourceLink" target="_blank" href="examples/Freq.java" onclick="showCode('../../displayCode.html', 'examples/Freq.java'); return false;"><code>following program</code></a> generates a frequency table of the words found in its argument list. The frequency table maps each word to the number of times it occurs in the argument list.</p>
<div class="codeblock"><pre>
import java.util.*;

public class Freq {
    public static void main(String[] args) {
        Map&lt;String, Integer&gt; m = new HashMap&lt;String, Integer&gt;();

        // Initialize frequency table from command line
        for (String a : args) {
            Integer freq = m.get(a);
            m.put(a, (freq == null) ? 1 : freq + 1);
        }

        System.out.println(m.size() + &quot; distinct words:&quot;);
        System.out.println(m);
    }
}
</pre></div>
<p>The only tricky thing about this program is the second argument of the <code>put</code> statement. That argument is a conditional expression that has the effect of setting the frequency to one if the word has never been seen before or one more than its current value if the word has already been seen. Try running this program with the command:</p>
<div class="codeblock"><pre>
java Freq if it is to be it is up to me to delegate
</pre></div>
<p>The program yields the following output.</p>
<div class="codeblock"><pre>
8 distinct words:
{to=3, delegate=1, be=1, it=2, up=1, if=1, me=1, is=2}
</pre></div>
<p>Suppose you&#39;d prefer to see the frequency table in alphabetical order. All you have to do is change the implementation type of the <code>Map</code> from <code>HashMap</code> to <code>TreeMap</code>. Making this four-character change causes the program to generate the following output from the same command line.</p>
<div class="codeblock"><pre>
8 distinct words:
{be=1, delegate=1, if=1, is=2, it=2, me=1, to=3, up=1}
</pre></div>
<p>Similarly, you could make the program print the frequency table in the order the words first appear on the command line simply by changing the implementation type of the map to <code>LinkedHashMap</code>. Doing so results in the following output.</p>
<div class="codeblock"><pre>
8 distinct words:
{if=1, it=2, is=2, to=3, be=1, up=1, me=1, delegate=1}
</pre></div>
<p>This flexibility provides a potent illustration of the power of an interface-based framework.</p>
<p>Like the 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html"><code>Set</code></a>and 
<a class="APILink" target="_blank" href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html"><code>List</code></a>interfaces, <code>Map</code> strengthens the requirements on the <code>equals</code> and <code>hashCode</code> methods so that two <code>Map</code> objects can be compared for logical equality without regard to their implementation types. Two <code>Map</code> instances are equal if they represent the same key-value mappings.</p>
<p>By convention, all general-purpose <code>Map</code> implementations provide constructors that take a <code>Map</code> object and initialize the new <code>Map</code> to contain all the key-value mappings in the specified <code>Map</code>. This standard <code>Map</code> conversion constructor is entirely analogous to the standard <code>Collection</code> constructor: It allows the caller to create a <code>Map</code> of a desired implementation type that initially contains all of the mappings in another <code>Map</code>, regardless of the other <code>Map</code>&#39;s implementation type. For example, suppose you have a <code>Map</code>, named <code>m</code>. The following one-liner creates a new <code>HashMap</code> initially containing all of the same key-value mappings as <code>m</code>.</p>
<div class="codeblock"><pre>
Map&lt;K, V&gt; copy = new HashMap&lt;K, V&gt;(m);
</pre></div>
<h2>Map Interface Bulk Operations</h2>
<p>The <code>clear</code> operation does exactly what you would think it could do: It removes all the mappings from the <code>Map</code>. The <code>putAll</code> operation is the <code>Map</code> analogue of the <code>Collection</code> interface&#39;s <code>addAll</code> operation. In addition to its obvious use of dumping one <code>Map</code> into another, it has a second, more subtle use. Suppose a <code>Map</code> is used to represent a collection of attribute-value pairs; the <code>putAll</code> operation, in combination with the <code>Map</code> conversion constructor, provides a neat way to implement attribute map creation with default values. The following is a static factory method that demonstrates this technique.</p>
<div class="codeblock"><pre>
static &lt;K, V&gt; Map&lt;K, V&gt; newAttributeMap(Map&lt;K, V&gt;defaults, Map&lt;K, V&gt; overrides) {
    Map&lt;K, V&gt; result = new HashMap&lt;K, V&gt;(defaults);
    result.putAll(overrides);
    return result;
}
</pre></div>
<h2>Collection Views</h2>
<p>The <code>Collection</code> view methods allow a <code>Map</code> to be viewed as a <code>Collection</code> in these three ways:</p>
<ul>
<li><code>keySet</code> &#151; the <code>Set</code> of keys contained in the <code>Map</code>.</li>
<li><code>values</code> &#151; The <code>Collection</code> of values contained in the <code>Map</code>. This <code>Collection</code> is not a <code>Set</code>, because multiple keys can map to the same value.</li>
<li><code>entrySet</code> &#151; the <code>Set</code> of key-value pairs contained in the <code>Map</code>. The <code>Map</code> interface provides a small nested interface called <code>Map.Entry</code>, the type of the elements in this <code>Set</code>.</li>
</ul>
<p>The <code>Collection</code> views provide the <i>only</i> means to iterate over a <code>Map</code>. This example illustrates the standard idiom for iterating over the keys in a <code>Map</code> with a <code>for-each</code> construct:</p>
<div class="codeblock"><pre>
for (KeyType key : m.keySet())
    System.out.println(key);
</pre></div>
<p>and with an <code>iterator</code>:</p>
<div class="codeblock"><pre>
// Filter a map based on some 
// property of its keys.
for (Iterator&lt;Type&gt; it = m.keySet().iterator(); it.hasNext(); )
    if (it.next().isBogus())
        it.remove();
</pre></div>
<p>The idiom for iterating over values is analogous. Following is the idiom for iterating over key-value pairs.</p>
<div class="codeblock"><pre>
for (Map.Entry&lt;KeyType, ValType&gt; e : m.entrySet())
    System.out.println(e.getKey() + ": " + e.getValue());
</pre></div>
<p>At first, many people worry that these idioms may be slow because the <code>Map</code> has to create a new <code>Collection</code> instance each time a <code>Collection</code> view operation is called. Rest easy: There&#39;s no reason that a <code>Map</code> cannot always return the same object each time it is asked for a given <code>Collection</code> view. This is precisely what all the <code>Map</code> implementations in <code>java.util</code> do.</p>
<p>With all three <code>Collection</code> views, calling an <code>Iterator</code>&#39;s <code>remove</code> operation removes the associated entry from the backing <code>Map</code>, assuming that the backing <code>Map</code> supports element removal to begin with. This is illustrated by the preceding filtering idiom.</p>
<p>With the <code>entrySet</code> view, it is also possible to change the value associated with a key by calling a <code>Map.Entry</code>&#39;s <code>setValue</code> method during iteration (again, assuming the <code>Map</code> supports value modification to begin with). Note that these are the <i>only</i> safe ways to modify a <code>Map</code> during iteration; the behavior is unspecified if the underlying <code>Map</code> is modified in any other way while the iteration is in progress.</p>
<p>The <code>Collection</code> views support element removal in all its many forms &#151; <code>remove</code>, <code>removeAll</code>, <code>retainAll</code>, and <code>clear</code> operations, as well as the <code>Iterator.remove</code> operation. (Yet again, this assumes that the backing <code>Map</code> supports element removal.)</p>
<p>The <code>Collection</code> views <i>do not</i> support element addition under any circumstances. It would make no sense for the <code>keySet</code> and <code>values</code> views, and it&#39;s unnecessary for the <code>entrySet</code> view, because the backing <code>Map</code>&#39;s <code>put</code> and <code>putAll</code> methods provide the same functionality.</p>
<h2>Fancy Uses of Collection Views: Map Algebra</h2>
<p>When applied to the <code>Collection</code> views, bulk operations (<code>containsAll</code>, <code>removeAll</code>, and <code>retainAll</code>) are surprisingly potent tools. For starters, suppose you want to know whether one <code>Map</code> is a submap of another &#151; that is, whether the first <code>Map</code> contains all the key-value mappings in the second. The following idiom does the trick.</p>
<div class="codeblock"><pre>
if (m1.entrySet().containsAll(m2.entrySet())) {
    ...
}
</pre></div>
<p>Along similar lines, suppose you want to know whether two <code>Map</code> objects contain mappings for all of the same keys.</p>
<div class="codeblock"><pre>
if (m1.keySet().equals(m2.keySet())) {
    ...
}
</pre></div>
<p>Suppose you have a <code>Map</code> that represents a collection of attribute-value pairs, and two <code>Set</code>s representing required attributes and permissible attributes. (The permissible attributes include the required attributes.) The following snippet determines whether the attribute map conforms to these constraints and prints a detailed error message if it doesn&#39;t.</p>
<div class="codeblock"><pre>
static &lt;K, V&gt; boolean validate(Map&lt;K, V&gt; attrMap, Set&lt;K&gt; requiredAttrs, Set&lt;K&gt;permittedAttrs) {
    boolean valid = true;
    Set&lt;K&gt; attrs = attrMap.keySet();

    if (! attrs.containsAll(requiredAttrs)) {
        Set&lt;K&gt; missing = new HashSet&lt;K&gt;(requiredAttrs);
        missing.removeAll(attrs);
        System.out.println("Missing attributes: " + missing);
        valid = false;
    }
    if (! permittedAttrs.containsAll(attrs)) {
        Set&lt;K&gt; illegal = new HashSet&lt;K&gt;(attrs);
        illegal.removeAll(permittedAttrs);
        System.out.println("Illegal attributes: " + illegal);
        valid = false;
    }
    return valid;
}
</pre></div>
<p>Suppose you want to know all the keys common to two <code>Map</code> objects.</p>
<div class="codeblock"><pre>
Set&lt;KeyType&gt;commonKeys = new HashSet&lt;KeyType&gt;(m1.keySet());
commonKeys.retainAll(m2.keySet());
</pre></div>
<p>A similar idiom gets you the common values.</p>
<p>All the idioms presented thus far have been nondestructive; that is, they don&#39;t modify the backing <code>Map</code>. Here are a few that do. Suppose you want to remove all of the key-value pairs that one <code>Map</code> has in common with another.</p>
<div class="codeblock"><pre>
m1.entrySet().removeAll(m2.entrySet());
</pre></div>
<p>Suppose you want to remove from one <code>Map</code> all of the keys that have mappings in another.</p>
<div class="codeblock"><pre>
m1.keySet().removeAll(m2.keySet());
</pre></div>
<p>What happens when you start mixing keys and values in the same bulk operation? Suppose you have a <code>Map</code>, <code>managers</code>, that maps each employee in a company to the employee&#39;s manager. We&#39;ll be deliberately vague about the types of the key and the value objects. It doesn&#39;t matter, as long as they&#39;re the same. Now suppose you want to know who all the &quot;individual contributors&quot; (or nonmanagers) are. The following snippet tells you exactly what you want to know.</p>
<div class="codeblock"><pre>
Set&lt;Employee&gt; individualContributors = new HashSet&lt;Employee&gt;(managers.keySet());
individualContributors.removeAll(managers.values());
</pre></div>
<p>Suppose you want to fire all the employees who report directly to some manager, Simon.</p>
<div class="codeblock"><pre>
Employee simon = ... ;
managers.values().removeAll(Collections.singleton(simon));
</pre></div>
<p>Note that this idiom makes use of <code>Collections.singleton</code>, a static factory method that returns an immutable <code>Set</code> with the single, specified element.</p>
<p>Once you&#39;ve done this, you may have a bunch of employees whose managers no longer work for the company (if any of Simon&#39;s direct-reports were themselves managers). The following code will tell you which employees have managers who no longer works for the company.</p>
<div class="codeblock"><pre>
Map&lt;Employee, Employee&gt; m = new HashMap&lt;Employee, Employee&gt;(managers);
m.values().removeAll(managers.keySet());
Set&lt;Employee&gt; slackers = m.keySet();
</pre></div>
<p>This example is a bit tricky. First, it makes a temporary copy of the <code>Map</code>, and it removes from the temporary copy all entries whose (manager) value is a key in the original <code>Map</code>. Remember that the original <code>Map</code> has an entry for each employee. Thus, the remaining entries in the temporary <code>Map</code> comprise all the entries from the original <code>Map</code> whose (manager) values are no longer employees. The keys in the temporary copy, then, represent precisely the employees that we&#39;re looking for.</p>
<p>There are many more idioms like the ones contained in this section, but it would be impractical and tedious to list them all. Once you get the hang of it, it&#39;s not that difficult to come up with the right one when you need it.</p>
<h2>Multimaps</h2>
<p>A <i>multimap</i> is like a <code>Map</code> but it can map each key to multiple values. The Java Collections Framework doesn&#39;t include an interface for multimaps because they aren&#39;t used all that commonly. It&#39;s a fairly simple matter to use a <code>Map</code> whose values are <code>List</code> instances as a multimap. This technique is demonstrated in the next code example, which reads a word list containing one word per line (all lowercase) and prints out all the anagram groups that meet a size criterion. An <i>anagram group</i> is a bunch of words, all of which contain exactly the same letters but in a different order. The program takes two arguments on the command line: (1) the name of the dictionary file and (2) the minimum size of anagram group to print out. Anagram groups containing fewer words than the specified minimum are not printed.</p>
<p>There is a standard trick for finding anagram groups: For each word in the dictionary, alphabetize the letters in the word (that is, reorder the word&#39;s letters into alphabetical order) and put an entry into a multimap, mapping the alphabetized word to the original word. For example, the word <em>bad</em> causes an entry mapping <em>abd</em> into <em>bad</em> to be put into the multimap. A moment&#39;s reflection will show that all the words to which any given key maps form an anagram group. It&#39;s a simple matter to iterate over the keys in the multimap, printing out each anagram group that meets the size constraint.</p>
<p>
<a class="SourceLink" target="_blank" href="examples/Anagrams.java" onclick="showCode('../../displayCode.html', 'examples/Anagrams.java'); return false;"><code>The following program</code></a> is a straightforward implementation of this technique.</p>
<div class="codeblock"><pre>
import java.util.*;
import java.io.*;

public class Anagrams {
    public static void main(String[] args) {
        int minGroupSize = Integer.parseInt(args[1]);

        // Read words from file and put into a simulated multimap
        Map&lt;String, List&lt;String&gt;&gt; m = new HashMap&lt;String, List&lt;String&gt;&gt;();

        try {
            Scanner s = new Scanner(new File(args[0]));
            while (s.hasNext()) {
                String word = s.next();
                String alpha = alphabetize(word);
                List&lt;String&gt; l = m.get(alpha);
                if (l == null)
                    m.put(alpha, l=new ArrayList&lt;String&gt;());
                l.add(word);
            }
        } catch (IOException e) {
            System.err.println(e);
            System.exit(1);
        }

        // Print all permutation groups above size threshold
        for (List&lt;String&gt; l : m.values())
            if (l.size() &gt;= minGroupSize)
                System.out.println(l.size() + &quot;: &quot; + l);
    }

    private static String alphabetize(String s) {
        char[] a = s.toCharArray();
        Arrays.sort(a);
        return new String(a);
    }
}
</pre></div>
<p>Running this program on a 173,000-word dictionary file with a minimum anagram group size of eight produces the following output.</p>
<div class="codeblock"><pre>
9: [estrin, inerts, insert, inters, niters, nitres, sinter,
     triens, trines]
8: [lapse, leaps, pales, peals, pleas, salep, sepal, spale]
8: [aspers, parses, passer, prases, repass, spares, sparse,
     spears]
10: [least, setal, slate, stale, steal, stela, taels, tales,
      teals, tesla]
8: [enters, nester, renest, rentes, resent, tenser, ternes,
     treens]
8: [arles, earls, lares, laser, lears, rales, reals, seral]
8: [earings, erasing, gainers, reagins, regains, reginas,
     searing, seringa]
8: [peris, piers, pries, prise, ripes, speir, spier, spire]
12: [apers, apres, asper, pares, parse, pears, prase, presa,
      rapes, reaps, spare, spear]
11: [alerts, alters, artels, estral, laster, ratels, salter,
      slater, staler, stelar, talers]
9: [capers, crapes, escarp, pacers, parsec, recaps, scrape,
     secpar, spacer]
9: [palest, palets, pastel, petals, plates, pleats, septal,
     staple, tepals]
9: [anestri, antsier, nastier, ratines, retains, retinas,
     retsina, stainer, stearin]
8: [ates, east, eats, etas, sate, seat, seta, teas]
8: [carets, cartes, caster, caters, crates, reacts, recast,
     traces]

</pre></div>
<p>Many of these words seem a bit bogus, but that&#39;s not the program&#39;s fault; they&#39;re in the dictionary file. 
Here's the
<a class="SourceLink" target="_blank" href="examples/dictionary.txt" onclick="showCode('../../displayCode.html', 'examples/dictionary.txt'); return false;"><code>dictionary file</code></a> we used.
It was derived from the Public Domain ENABLE benchmark reference word list.
</p>


        </div>
        <div class="NavBit">
            <a target="_top" href="deque.html">&laquo; Previous</a>
            &bull;
            <a target="_top" href="../TOC.html">Trail</a>
            &bull;
            <a target="_top" href="order.html">Next &raquo;</a>
        </div>
    </div>
    
<hr class="clearfloat"/>

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">About Oracle</a> | 
<a href="http://www.oracle.com/us/corporate/contact/index.html">Contact Us</a> |
<a href="http://www.oracle.com/us/legal/index.html">Legal Notices</a> | 
<a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a> |
<a href="http://www.oracle.com/us/legal/privacy/index.html">Your Privacy Rights</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">
Copyright &copy; 1995, 2020 Oracle and/or its affiliates. All rights reserved.</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>Previous page:</b> The Deque Interface
        <br /><b>Next page:</b> Object Ordering
    </div>
</body>
</html> 
