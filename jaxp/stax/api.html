<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>StAX API (The Java&trade; Tutorials &gt;        
            Java API for XML Processing (JAXP) &gt; Streaming API for XML)
</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="description" content="This JAXP Java tutorial describes Java API for XML Processing (jaxp), XSLT, SAX, and related XML topics" />
     <meta name="keywords" content="java programming, learn java, java sample code, jaxp, xml, xslt, sax" />
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        A browser with JavaScript enabled is required for this page to operate properly.
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName" >Documentation</div>
            </div> 
            <br class="clearfloat" />
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">The Java&trade; Tutorials</div>
                        <div id="TopBar_right"> 
                            <!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            -->

<script type="text/javascript">function search() { var sform = document.getElementById("searchForm"); var srchelem = document.getElementById("searchField"); var srchelemreal = document.getElementById("keywordreal"); var srchval = srchelem.value; if (srchval.length == 0) { return false; } srchelemreal.value = srchval; sform.action = "http://docs.oracle.com/apps/search/search.jsp"; sform.method = "get"; sform.target = "_blank"; sform.submit(); }</script><form id="searchForm" onsubmit="return search()"><input type="hidden" name="category" value="java"/><input type="hidden" name="product" value="e25407-01"/><input type="hidden" name="q" value="" id="keywordreal"/><label for="searchField"><input type="text" id="searchField" size="30" onclick="this.value='';" /></label><input type="submit" value="Search" /></form>
              
                            <a href="javascript:toggleLeft()" id="ToggleLeft">Hide TOC</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">Streaming API for XML</a></div>
<div class="linkAHEAD"><a href="why.html">Why StAX?</a></div>
<div class="nolinkAHEAD">StAX API</div>
<div class="linkAHEAD"><a href="using.html">Using StAX</a></div>
<div class="linkAHEAD"><a href="parser.html">Oracle's Streaming XML Parser Implementation</a></div>
<div class="linkAHEAD"><a href="example.html">Example Code</a></div>
<div class="linkAHEAD"><a href="info.html">Further Information</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail:</b> Java API for XML Processing (JAXP)
        <br /><b>Lesson:</b> Streaming API for XML
    </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Home Page</a>
                &gt;
                <a href="../index.html" target="_top">Java API for XML Processing (JAXP)</a>
                &gt;
                <a href="index.html" target="_top">Streaming API for XML</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="why.html">&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target="_top" href="../TOC.html">Trail</a>&nbsp;&bull;&nbsp;<a target="_top" href="using.html">Next&nbsp;&raquo;</a>
            </div>
            <div class="Banner"><p style="background-color: rgb(247, 248, 249); border-width: 1px; padding: 10px; font-style: italic; border-style: solid; border-color: rgb(64, 74, 91);">The Java Tutorials have been written for JDK 8. Examples and practices described in this page don't take advantage of improvements introduced in later releases and might use technology no longer available.<br/>See <a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/java/javase&id=java_language_changes">Java Language Changes</a> for a summary of updated language features in Java SE 9 and subsequent releases.<br/>See <a href="https://www.oracle.com/technetwork/java/javase/jdk-relnotes-index-2162236.html">JDK Release Notes</a> for information about new features, enhancements, and removed or deprecated options for all JDK releases.</p></div>
            <div id="PageTitle"><h1>StAX API</h1></div>
            <div id="PageContent">

<!-- StAX API -->
<p><a name="indexterm-13" id="indexterm-13"></a></p>
<p>The StAX API exposes methods for iterative, event-based processing of XML documents. XML documents are treated as a filtered series of events, and infoset states can be stored in a procedural fashion. Moreover, unlike SAX, the StAX API is bidirectional, enabling both reading and writing of XML documents.</p>
<p>The StAX API is really two distinct API sets: a <b>cursor</b> API and an <b>iterator</b> API. These two API sets are explained in greater detail later in this lesson, but their main features are briefly described below.</p>
<p><a name="bnbed" id="bnbed"></a></p>
<h2>Cursor API</h2>
<p><a name="indexterm-14" id="indexterm-14"></a><a name="indexterm-15" id="indexterm-15"></a></p>
<p>As the name implies, the StAX <b>cursor</b> API represents a cursor with which you can walk an XML document from beginning to end. This cursor can point to one thing at a time, and always moves forward, never backward, usually one infoset element at a time.</p>
<p>The two main cursor interfaces are <tt>XMLStreamReader</tt> and <tt>XMLStreamWriter</tt>. <tt>XMLStreamReader</tt> includes accessor methods for all possible information retrievable from the XML Information model, including document encoding, element names, attributes, namespaces, text nodes, start tags, comments, processing instructions, document boundaries, and so forth; for example:</p>
<div class="codeblock"><pre>
public interface XMLStreamReader {
    public int next() throws XMLStreamException;
    public boolean hasNext() throws XMLStreamException;

    public String getText();
    public String getLocalName();
    public String getNamespaceURI();
    // ... other methods not shown
}
</pre></div>
<p>You can call methods on <tt>XMLStreamReader</tt>, such as <tt>getText</tt> and <tt>getName</tt>, to get data at the current cursor location. <tt>XMLStreamWriter</tt> provides methods that correspond to <tt>StartElement</tt> and <tt>EndElement</tt> event types; for example:</p>
<div class="codeblock"><pre>
public interface XMLStreamWriter {
    public void writeStartElement(String localName) throws XMLStreamException;
    public void writeEndElement() throws XMLStreamException;
    public void writeCharacters(String text) throws XMLStreamException;
    // ... other methods not shown
}
</pre></div>
<p>The cursor API mirrors SAX in many ways. For example, methods are available for directly accessing string and character information, and integer indexes can be used to access attribute and namespace information. As with SAX, the cursor API methods return XML information as strings, which minimizes object allocation requirements.</p>
<p><a name="bnbee" id="bnbee"></a></p>
<h2>Iterator API</h2>
<p><a name="indexterm-16" id="indexterm-16"></a><a name="indexterm-17" id="indexterm-17"></a></p>
<p>The StAX <b>iterator</b> API represents an XML document stream as a set of discrete event objects. These events are pulled by the application and provided by the parser in the order in which they are read in the source XML document.</p>
<p>The base iterator interface is called <tt>XMLEvent</tt>, and there are subinterfaces for each event type listed in <a href="#indexterm-18"> XMLEvent table</a>. The primary parser interface for reading iterator events is <tt>XMLEventReader</tt>, and the primary interface for writing iterator events is <tt>XMLEventWriter</tt>. The <tt>XMLEventReader</tt> interface contains five methods, the most important of which is <tt>nextEvent</tt>, which returns the next event in an XML stream. <tt>XMLEventReader</tt> implements <tt>java.util.Iterator</tt>, which means that returns from <tt>XMLEventReader</tt> can be cached or passed into routines that can work with the standard Java Iterator; for example:</p>
<div class="codeblock"><pre>
public interface XMLEventReader extends Iterator {
    public XMLEvent nextEvent() throws XMLStreamException;
    public boolean hasNext();
    public XMLEvent peek() throws XMLStreamException;
    // ...
}
</pre></div>
<p>Similarly, on the output side of the iterator API, you have:</p>
<div class="codeblock"><pre>
public interface XMLEventWriter {
    public void flush() throws XMLStreamException;
    public void close() throws XMLStreamException;
    public void add(XMLEvent e) throws XMLStreamException;
    public void add(Attribute attribute) throws XMLStreamException;
    // ...
}
</pre></div>
<p><a name="bnbef" id="bnbef"></a></p>
<h3>Iterator Event Types</h3>
<p><a name="indexterm-18" id="indexterm-18"></a></p>
<table summary="XMLEvent Types" border="1">
<caption><tt>XMLEvent</tt> Types Defined in the Event Iterator API</caption>
<col width="25%" />
<col width="74%" />
<tr>
<th id="h1" align="left" valign="top" scope="col">
<p>Event Type</p>
</th>
<th id="h2" align="left" valign="top" scope="col">
<p>Description</p>
</th>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>StartDocument</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Reports the beginning of a set of XML events, including encoding, XML version, and standalone properties.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>StartElement</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Reports the start of an element, including any attributes and namespace declarations; also provides access to the prefix, namespace URI, and local name of the start tag.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>EndElement</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Reports the end tag of an element. Namespaces that have gone out of scope can be recalled here if they have been explicitly set on their corresponding <tt>StartElement</tt>.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>Characters</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Corresponds to XML <tt>CData</tt> sections and <tt>CharacterData</tt> entities. Note that ignorable white space and significant white space are also reported as <tt>Character</tt> events.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>EntityReference</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Character entities can be reported as discrete events, which an application developer can then choose to resolve or pass through unresolved. By default, entities are resolved. Alternatively, if you do not want to report the entity as an event, replacement text can be substituted and reported as <tt>Characters</tt>.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>ProcessingInstruction</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Reports the target and data for an underlying processing instruction.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>Comment</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Returns the text of a comment.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>EndDocument</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Reports the end of a set of XML events.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>DTD</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Reports as <tt>java.lang.String</tt> information about the DTD, if any, associated with the stream, and provides a method for returning custom objects found in the DTD.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>Attribute</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>Attributes are generally reported as part of a <tt>StartElement</tt> event. However, there are times when it is desirable to return an attribute as a standalone <tt>Attribute</tt> event; for example, when a namespace is returned as the result of an <tt>XQuery</tt> or <tt>XPath</tt> expression.</p>
</td>
</tr>
<tr>
<td headers="h1" align="left" valign="top" scope="row">
<p><tt>Namespace</tt></p>
</td>
<td headers="h2" align="left" valign="top" scope="row">
<p>As with attributes, namespaces are usually reported as part of a <tt>StartElement</tt>, but there are times when it is desirable to report a namespace as a discrete <tt>Namespace</tt> event.</p>
</td>
</tr>
</table>
<p>Note that the <tt>DTD</tt>, <tt>EntityDeclaration</tt>, <tt>EntityReference</tt>, <tt>NotationDeclaration</tt>, and <tt>ProcessingInstruction</tt> events are only created if the document being processed contains a DTD.</p>
<p><a name="bnbeh" id="bnbeh"></a></p>
<h3>Example of Event Mapping</h3>
<p><a name="indexterm-19" id="indexterm-19"></a><a name="indexterm-20" id="indexterm-20"></a></p>
<p>As an example of how the event iterator API maps an XML stream, consider the following XML document:</p>
<div class="codeblock"><pre>
&lt;?xml version="1.0"?>
&lt;BookCatalogue xmlns="http://www.publishing.org">
    &lt;Book>
        &lt;Title>Yogasana Vijnana: the Science of Yoga&lt;/Title>
        &lt;ISBN>81-40-34319-4&lt;/ISBN>
        &lt;Cost currency="INR">11.50&lt;/Cost>
    &lt;/Book>
&lt;/BookCatalogue>
</pre></div>
<p>This document would be parsed into eighteen primary and secondary events, as shown in the following table. Note that secondary events, shown in curly braces (<tt>{}</tt>), are typically accessed from a primary event rather than directly.</p>
<p><a name="bnbei" id="bnbei"></a></p>
<table summary="Example of Iterator API Event Mapping" border="1">
<caption>Example of Iterator API Event Mapping</caption>
<col width="6%" />
<col width="72%" />
<col width="21%" />
<tr>
<th id="h101" align="left" valign="top" scope="col">
<p>#</p>
</th>
<th id="h102" align="left" valign="top" scope="col">
<p>Element/Attribute</p>
</th>
<th id="h103" align="left" valign="top" scope="col">
<p>Event</p>
</th>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>1</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>version=&quot;1.0&quot;</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>StartDocument</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>2</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>isCData = false data = &quot;\n&quot; IsWhiteSpace = true</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>Characters</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>3</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = BookCatalogue:http://www.publishing.org attributes = null namespaces = {BookCatalogue&quot; -&gt; http://www.publishing.org&quot;}</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>StartElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>4</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = Book attributes = null namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>StartElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>5</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = Title attributes = null namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>StartElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>6</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>isCData = false data = &quot;Yogasana Vijnana: the Science of Yoga\n\t&quot; IsWhiteSpace = false</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>Characters</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>7</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = Title namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>EndElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>8</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = ISBN attributes = null namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>StartElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>9</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>isCData = false data = &quot;81-40-34319-4\n\t&quot; IsWhiteSpace = false</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>Characters</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>10</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = ISBN namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>EndElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>11</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = Cost attributes = {&quot;currency&quot; -&gt; INR} namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>StartElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>12</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>isCData = false data = &quot;11.50\n\t&quot; IsWhiteSpace = false</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>Characters</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>13</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = Cost namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>EndElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>14</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>isCData = false data = &quot;\n&quot; IsWhiteSpace = true</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>Characters</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>15</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = Book namespaces = null</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>EndElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>16</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>isCData = false data = &quot;\n&quot; IsWhiteSpace = true</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>Characters</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>17</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"><code>qname = BookCatalogue:http://www.publishing.org namespaces = {BookCatalogue&quot; -&gt; http://www.publishing.org&quot;}</code></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>EndElement</tt></p>
</td>
</tr>
<tr>
<td headers="h101" align="left" valign="top" scope="row">
<p>18</p>
</td>
<td headers="h102" align="left" valign="top" scope="row"></td>
<td headers="h103" align="left" valign="top" scope="row">
<p><tt>EndDocument</tt></p>
</td>
</tr>
</table>
<p>There are several important things to note in this example:</p>
<ul>
<li>
<p>The events are created in the order in which the corresponding XML elements are encountered in the document, including nesting of elements, opening and closing of elements, attribute order, document start and document end, and so forth.</p>
</li>
<li>
<p>As with proper XML syntax, all container elements have corresponding start and end events; for example, every <tt>StartElement</tt> has a corresponding <tt>EndElement</tt>, even for empty elements.</p>
</li>
<li>
<p><tt>Attribute</tt> events are treated as secondary events, and are accessed from their corresponding <tt>StartElement</tt> event.</p>
</li>
<li>
<p>Similar to <tt>Attribute</tt> events, <tt>Namespace</tt> events are treated as secondary, but appear twice and are accessible twice in the event stream, first from their corresponding <tt>StartElement</tt> and then from their corresponding <tt>EndElement</tt>.</p>
</li>
<li>
<p><tt>Character</tt> events are specified for all elements, even if those elements have no character data. Similarly, <tt>Character</tt> events can be split across events.</p>
</li>
<li>
<p>The StAX parser maintains a namespace stack, which holds information about all XML namespaces defined for the current element and its ancestors. The namespace stack, which is exposed through the <tt>javax.xml.namespace.NamespaceContext</tt> interface, can be accessed by namespace prefix or URI.</p>
</li>
</ul>
<p><a name="bnbej" id="bnbej"></a></p>
<h2>Choosing between Cursor and Iterator APIs</h2>
<p><a name="indexterm-21" id="indexterm-21"></a></p>
<p>It is reasonable to ask at this point, &ldquo;What API should I choose? Should I create instances of <tt>XMLStreamReader</tt> or <tt>XMLEventReader</tt>? Why are there two kinds of APIs anyway?&rdquo;</p>
<p><a name="bnbek" id="bnbek"></a></p>
<h3>Development Goals</h3>
<p>The authors of the StAX specification targeted three types of developers:</p>
<ul>
<li>
<p><b>Library and infrastructure developers</b>: Create application servers, JAXM, JAXB, JAX-RPC and similar implementations; need highly efficient, low-level APIs with minimal extensibility requirements.</p>
</li>
<li>
<p><b>Java ME developers</b>: Need small, simple, pull-parsing libraries, and have minimal extensibility needs.</p>
</li>
<li>
<p><b>Java Platform, Enterprise Edition (Java EE) and Java Platform, Standard Edition (Java SE) developers</b>: Need clean, efficient pull-parsing libraries, plus need the flexibility to both read and write XML streams, create new event types, and extend XML document elements and attributes.</p>
</li>
</ul>
<p>Given these wide-ranging development categories, the StAX authors felt it was more useful to define two small, efficient APIs rather than overloading one larger and necessarily more complex API.</p>
<p><a name="bnbel" id="bnbel"></a></p>
<h3>Comparing Cursor and Iterator APIs</h3>
<p>Before choosing between the cursor and iterator APIs, you should note a few things that you can do with the iterator API that you cannot do with the cursor API:</p>
<ul>
<li>
<p>Objects created from the <tt>XMLEvent</tt> subclasses are immutable, and can be used in arrays, lists, and maps, and can be passed through your applications even after the parser has moved on to subsequent events.</p>
</li>
<li>
<p>You can create subtypes of <tt>XMLEvent</tt> that are either completely new information items or extensions of existing items but with additional methods.</p>
</li>
<li>
<p>You can add and remove events from an XML event stream in much simpler ways than with the cursor API.</p>
</li>
</ul>
<p>Similarly, keep some general recommendations in mind when making your choice:</p>
<ul>
<li>
<p>If you are programming for a particularly memory-constrained environment, like Java ME, you can make smaller, more efficient code with the cursor API.</p>
</li>
<li>
<p>If performance is your highest priority&mdash;for example, when creating low-level libraries or infrastructure&mdash;the cursor API is more efficient.</p>
</li>
<li>
<p>If you want to create XML processing pipelines, use the iterator API.</p>
</li>
<li>
<p>If you want to modify the event stream, use the iterator API.</p>
</li>
<li>
<p>If you want your application to be able to handle pluggable processing of the event stream, use the iterator API.</p>
</li>
<li>
<p>In general, if you do not have a strong preference one way or the other, using the iterator API is recommended because it is more flexible and extensible, thereby &ldquo;future-proofing&rdquo; your applications.</p>
</li>
</ul>


        </div>
        <div class="NavBit">
            <a target="_top" href="why.html">&laquo; Previous</a>
            &bull;
            <a target="_top" href="../TOC.html">Trail</a>
            &bull;
            <a target="_top" href="using.html">Next &raquo;</a>
        </div>
    </div>
    
<hr class="clearfloat"/>

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">About Oracle</a> | 
<a href="http://www.oracle.com/us/corporate/contact/index.html">Contact Us</a> |
<a href="http://www.oracle.com/us/legal/index.html">Legal Notices</a> | 
<a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a> |
<a href="http://www.oracle.com/us/legal/privacy/index.html">Your Privacy Rights</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">
Copyright &copy; 1995, 2020 Oracle and/or its affiliates. All rights reserved.</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>Previous page:</b> Why StAX?
        <br /><b>Next page:</b> Using StAX
    </div>
</body>
</html> 
